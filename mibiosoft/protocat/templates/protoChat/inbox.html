<script>
$(document).ready(function(){
  var form = `<form method="post">
  <div class="form-group">
  <label for="reply">Reply</label>
  <input type="message" class="form-control" aria-describedby="replyHelp">
  <button type="submit" class="btn btn-default">Submit</button>
  </div></form>`;
  $("button.reply").on("click", function(event){
    console.log(event.target.parentElement.parentElement.parentElement);
    var newForm = document.createElement("div");
    newForm.innerHTML = form;
    event.target.parentElement.parentElement.append(newForm);
    event.target.parentElement.removeChild(event.target);
  })
})
</script>
<div style="width:75%; margin:auto; font-size:2rem; padding-top:15px;">
  {% for message_chain in message_list %}
  <ul class="list-group">
    <li class="list-group-item">
      {% if message_chain.0.sender != me %}
      Messages from: <b>{{message_chain.0.sender}}</b>
      {% else %}
      Messages from: <b>{{message_chain.0.recipient}}</b>
      {% endif %}
      <ul>
        {% for message in message_chain %}
        <li>
          <div style="border-bottom:1px solid #aaa;">
            {% if message.recipient == me %}
            <span>From: <b>{{ message.sender }}</b></span>
            {% else %}
            <span>To: <b>{{ message.recipient }}</b></span>
            {% endif %}
            <button class="reply btn btn-primary btn-sm" style="float:right;margin-left:10px;">Reply</button>
            <span style="float:right;font-size:70%;line-height:35px">{{ message.timeSent }}</span>
          </div>
          <p style="padding-left:25px">{{ message.message }}</p>
        </li>
        {% endfor %}
      </ul>
    </li>
  </ul>
  {% endfor %}
</div>
